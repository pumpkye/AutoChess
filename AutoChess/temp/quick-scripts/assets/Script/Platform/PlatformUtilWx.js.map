{"version":3,"sources":["PlatformUtilWx.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/Platform","sourcesContent":["import { PlatformUtilBase } from \"./PlatformUtilBase\";\n\nexport class PlatformUtilWx extends PlatformUtilBase {\n    constructor() {\n        super();\n        console.log(\"init PlatformUtilWx\")\n    }\n\n    getOpenId() {\n        return \"0\";\n    }\n\n    loadUserFileData(obj) {\n        // const fs = wx.getFileSystemManager()\n        // fs.readFile({\n        //     filePath: `${wx.env.USER_DATA_PATH}/${obj.fileName}`,\n        //     encoding: 'utf8',\n        //     success(data) {\n        //         let jsonStr = data.data\n        //         // console.log('load filestr', jsonStr)\n        //         let fileData = JSON.parse(jsonStr)\n        //         fileData.msg = \"success\"\n        //         if (obj.callback && typeof (obj.callback) == \"function\") {\n        //             obj.callback(fileData)\n        //         }\n        //     },\n        //     fail(data) {\n        //         if (obj.callback && typeof (obj.callback) == \"function\") {\n        //             obj.callback({ msg: \"fail\" })\n        //         }\n        //         console.log('文件不存在', obj.fileName)\n        //     },\n        // })\n    }\n\n    saveUserFileData(obj) {\n        // fileContent = JSON.stringify(obj.content)\n        // const fs = wx.getFileSystemManager()\n        // fs.writeFileSync(`${wx.env.USER_DATA_PATH}/${obj.fileName}`, fileContent, 'utf8')\n    }\n\n\n    shareGame(showScore) {\n        // let idx = 0\n        // if (!IS_EXAMINE) {\n        //     idx = Math.floor(Math.random() * 6)\n        // }\n        // let urlStr = WxConfig.adList[idx].url\n        // let titleStr = WxConfig.adList[idx].title\n        // if (showScore) {\n        //     titleStr = WxConfig.adList[idx].scoreTitle + g_GameScene.getFormatTime()\n        // }\n        // wx.shareAppMessage({\n        //     title: titleStr,\n        //     imageUrl: urlStr,\n        //     success(res) {\n        //         if (!IS_EXAMINE) {\n        //             // let gameScene = cc.find(\"Canvas\").getComponent(\"GameScene\")\n        //             g_GameScene.addReliveCount()\n        //         }\n        //     },\n        //     fail(res) {\n        //         // console.log('share fail')\n        //     }\n        // })\n    }\n\n    shareToGroup() {\n        // let idx = 0\n        // if (!IS_EXAMINE) {\n        //     idx = Math.floor(Math.random() * 6)\n        // }\n        // let titleStr = WxConfig.adList[idx].title\n        // let urlStr = WxConfig.adList[idx].url\n        // wx.shareAppMessage({\n        //     title: titleStr,\n        //     imageUrl: urlStr,\n        //     success(res) {\n        //         // let gameScene = cc.find(\"Canvas\").getComponent(\"GameScene\")\n        //         g_UiManager.uiRank.touchNode.active = true\n        //         g_UiManager.uiRank.rankBgNode.active = true\n        //         g_UiManager.uiRank.closeBtn.active = true\n        //         // console.log('分享成功',res)\n        //         if (res.shareTickets != undefined && res.shareTickets.length > 0) {\n        //             // console.log('post message 5')\n        //             window.wx.postMessage({\n        //                 messageType: 5,\n        //                 MAIN_MENU_NUM: \"x1\",\n        //                 shareTicket: res.shareTickets[0]\n        //             });\n        //         }\n        //     },\n        //     fail(res) {\n        //         // console.log('分享失败')\n        //     }\n        // });\n    }\n\n    initAd() {\n        // this.bannerAd = wx.createBannerAd({\n        //     adUnitId: window.AD.adId,\n        //     style: {\n        //         left: 0,\n        //         bottom: 0,\n        //         width: 750,\n        //     }\n        // })\n\n        // this.bannerAd.show()\n    }\n\n    showAd() {\n        // if (this.bannerAd) {\n        //     this.bannerAd.show()\n        // }\n    }\n\n    hideAd() {\n        // if (this.bannerAd) {\n        //     this.bannerAd.hide()\n        // }\n    }\n\n    postMessage(obj) {\n        // window.wx.postMessage(obj)\n    }\n\n    initSharedCanvas() {\n        // this.tex = new cc.Texture2D();\n        // sharedCanvas.width = 750;\n        // sharedCanvas.height = 1334;\n    }\n\n    getSubCanvasTex() {\n        // if (!this.tex) {\n        //     return\n        // }\n        // this.tex.initWithElement(sharedCanvas);\n        // this.tex.handleLoadedTexture();\n        // return this.tex\n        return null\n    }\n\n    init() {\n        //     console.log('wxUtil onload')\n        //     wx.showShareMenu({ withShareTicket: true })\n        //     wx.onShareAppMessage(function () {\n        //         let idx = 0\n        //         if (!IS_EXAMINE) {\n        //             idx = Math.floor(Math.random() * 6)\n        //         }\n        //         let titleStr = window.AD_LIST[idx].title\n        //         let urlStr = window.AD_LIST[idx].url\n        //         return {\n        //             title: titleStr,\n        //             imageUrl: urlStr,\n        //             success(res) {\n        //                 if (!IS_EXAMINE) {\n        //                     // let gameScene = cc.find(\"Canvas\").getComponent(\"GameScene\")\n        //                     // gameScene.addReliveCount()\n        //                     g_GameScene.addReliveCount()\n        //                 }\n        //             },\n        //             fail(res) {\n        //             }\n        //         }\n        //     })\n        //     wx.onShow(function () {\n        //         // let gameScene = g_GameScene\n        //         // if (g_UiManager.uiPause.isActive() && g_UiManager.uiPause.startNode.active) {\n        //         //     g_UiManager.uiPause.playMusic()\n        //         // } else if (gameScene.curSoundType != null) {\n        //         //     gameScene.playMusic(gameScene.curSoundType)\n        //         // }\n        //     })\n        //     wx.onHide(function () {\n        //         // console.log('onHide')\n        //     })\n    }\n}"]}