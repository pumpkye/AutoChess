{"version":3,"sources":["UILoadLayout.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/Gui","sourcesContent":["import { g_UIManager } from \"./UIManager\";\nimport { g_layoutMessage } from \"../Net/Layout\";\nimport UILoadLayoutItem from \"./UILoadLayoutItem\";\nimport UIChessTable from \"./UIChessTable\";\nimport { ChessNpc } from \"../AutoBattle/Model/ChessNpc\";\n\n// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UILoadLayout extends cc.Component {\n    @property(cc.Node)\n    container: cc.Node = null;\n\n    curSelectId: number;\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start() {\n        this.init();\n    }\n\n    async init() {\n        console.log(\"UILoadLayout init\");\n        let ret = await g_layoutMessage.listAllLayout();\n        console.log(ret);\n        if (ret.success) {\n            for (let i = 0; i < ret.layoutList.length; i++) {\n                const layout = ret.layoutList[i];\n                let item: UILoadLayoutItem = g_UIManager.createPanelOnly(\"UILoadLayoutItem\");\n                if (item) {\n                    item.node.parent = this.container;\n                    item.init(layout.id, layout.name);\n                }\n            }\n        }\n    }\n\n    // update (dt) {}\n    async layoutA() {\n        let ret = await g_layoutMessage.getLayout(this.curSelectId);\n        if (ret.success) {\n            let chessTable: UIChessTable = g_UIManager.getPanel(\"UIChessTable\");\n            if (chessTable) {\n                for (let i = 0; i < ret.layout.npcList.length; i++) {\n                    const npc = ret.layout.npcList[i];\n                    chessTable.setGridLabel(npc.pos.x, npc.pos.y, new ChessNpc(0, npc.baseId, npc.level, true));\n                }\n            }\n        }\n    }\n\n    async layoutB() {\n        let ret = await g_layoutMessage.getLayout(this.curSelectId);\n        if (ret.success) {\n            let chessTable: UIChessTable = g_UIManager.getPanel(\"UIChessTable\");\n            if (chessTable) {\n                for (let i = 0; i < ret.layout.npcList.length; i++) {\n                    const npc = ret.layout.npcList[i];\n                    chessTable.setGridLabel(7 - npc.pos.x, 7 - npc.pos.y, new ChessNpc(0, npc.baseId, npc.level, false));\n                }\n            }\n        }\n    }\n\n    onCloseClick() {\n        g_UIManager.closePanel(this)\n    }\n}\n"]}